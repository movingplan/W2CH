{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/json/data.js","src/js/lib/app.js","src/js/main.js","src/js/modules/boot/boot.js","src/js/modules/todoitems/controller.js","src/js/modules/todoitems/model.js","src/js/modules/todoitems/todoitems.js","src/js/modules/todoitems/todoviewmodel.js","src/js/modules/todoitems/view.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_id","title","days","days_after_move","_owner","state","_updatedDate","_createdDate","moduleName","M","V","C","view","currView","model","currModel","controller","init","modules","Model","_classCallCheck","this","tree","callbacks","setPre","setPost","change","hasOwnProperty","runCallbacks","props","propsOrPath","value","changeEvent","isObject","merge","isChanged","path","setNode","getNode","label","callback","unshift","View","selector","el","querySelector","querySelectorAll","Controller","bindings","domEls","Object","nodeType","Array","isArray","RegExp","pathStr","currNode","prop","nextProp","undefined","currVal","val","Number","parseFloat","eachCallback","pathArr","split","len","changeCount","mergeChildObs","result","run","level","params","param","retOb","paramsCount","nodeName","apply","arguments","_boot","_interopRequireDefault","_todoitems","default","then","_default","ready","Promise","resolve","reject","document","addEventListener","test","location","href","app","_interopRequireWildcard","ToDoViewModel","data","_this","_possibleConstructorReturn","_getPrototypeOf","window","onmessage","event","registerOnMessageReceivedHandler","on","console","log","setTitle","get","renderToDoItems","bindEventListeners","setTimeout","set","tasks","_this2","bind","span.close","onclick","removeToDoItem","li","changeToDoItemStatus","#addBtn","addToDoItem","#todo","onkeypress","keyCode","which","#debug","innerHTML","JSON","stringify","preventDefault","$","find","l","target","attr","open","addClass","removeClass","getModelState","setCounter","res","id","map","index","arr","_this3","stopPropagation","confirm","parent","hide","todo","addItem","jsObj","postMessage","GET","syncCalendar","_event$data","saveAll","beforeRegister","error","blob","file","Blob","type","fileURL","URL","createObjectURL","info","concat","sendMessageToWix","POST","prepareGetDataFromWix","sanitize","replace","_model","_view","_controller","add","createGuid","order","crypto","getRandomValues","Uint8Array","toString","getElementById","setModal","showLoader","modal","$loader","count","setInterval","append","fadeIn","speed","closest","item","list","wrapper","createElement","renderToDoItem","firstChild","childNodes","insertBefore","appendChild","message","html","yescallBack","nocallBack","elem","show","removeItem","todos","total","filter","err","_this4","prototype","join","checked"],"mappings":"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","file":"main.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","'use strict';\r\nexport let tasks =  [\r\n    {\r\n      \"_id\": \"01e0ba3c-0693-4017-9401-3ab6f017ad1e\",\r\n      \"title\": \"Mietvertrag der neuen Wohnung unterzeichnen <a href='https://www.comparis.de/tipps-zum-umzug-schweiz/zusammensetzung-des-mietzins' target='_blank' style='color:#66CC00;'>Erfahren Sie mehr...</a>\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"state\": \"default\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.056Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.056Z\"\r\n    },\r\n    {\r\n      \"_id\": \"5b8462d9-4321-436f-a6cf-39cc3502f79d\",\r\n      \"title\": \"Form- und fristgerecht alte Wohnung kündigen\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.055Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.055Z\"\r\n    },\r\n    {\r\n      \"_id\": \"a274c55a-9fef-4e37-a83f-32e541fd1e2b\",\r\n      \"title\": \"Nachmieter suchen\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.054Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.054Z\"\r\n    },\r\n    {\r\n      \"_id\": \"c02a0480-7918-4600-8b8e-246f075b5e9a\",\r\n      \"title\": \"Auszugstermin mit altem Vermieter besprechen/vereinbaren\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.053Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.053Z\"\r\n    },\r\n    {\r\n      \"_id\": \"c279ba1b-afe7-4e82-9d74-ea3858acdb10\",\r\n      \"title\": \"Einzugstermin mit neuem Vermieter besprechen/vereinbaren\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.052Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.052Z\"\r\n    },\r\n    {\r\n      \"_id\": \"c5cb79ec-77dc-41e7-b5d5-38e0486d7710\",\r\n      \"title\": \"Ggf. Sonderurlaub bei Arbeitgeber einreichen\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.051Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.051Z\"\r\n    },\r\n    {\r\n      \"_id\": \"bdbdf93b-a290-45df-8652-3e4a31742a17\",\r\n      \"title\": \"Entscheiden, ob man für die Endreinigung der Wohnung ein Reinigungsinstitut beauftragt oder die Wohnung selbst putzt\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.050Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.050Z\"\r\n    },\r\n    {\r\n      \"_id\": \"3e889799-a541-48d9-a918-aa07770ddc16\",\r\n      \"title\": \"Entscheiden, ob man für den Umzug ein Umzugsunternehmen beauftragt oder den Umzug selbst durchführt\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.049Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.049Z\"\r\n    },\r\n    {\r\n      \"_id\": \"b545f00a-ccd7-447a-aa50-26137d4300bf\",\r\n      \"title\": \"Ggf. weitere Umzugshelfer organisieren\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.048Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.048Z\"\r\n    },\r\n    {\r\n      \"_id\": \"69ffae68-5ee5-4d78-ac71-b7469e765df1\",\r\n      \"title\": \"Offerten bei Umzugsunternehmen und/oder Reinigungsinstitut einholen\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.047Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.047Z\"\r\n    },\r\n    {\r\n      \"_id\": \"82d51fde-f1ce-48fe-af71-0a45234028b3\",\r\n      \"title\": \"Neue Wohnung ausmessen, bzw. Grundrissplan für die neue Wohnung anfordern\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.046Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.046Z\"\r\n    },\r\n    {\r\n      \"_id\": \"841f56b1-7d4a-4255-8822-fb01d95b2e4e\",\r\n      \"title\": \"Einrichtung der neuen Wohnung planen\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.045Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.045Z\"\r\n    },\r\n    {\r\n      \"_id\": \"05287b73-f471-43d4-bf1c-2c209739b3b2\",\r\n      \"title\": \"Ggf. Neuanschaffungen an neue Adresse bestellen\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.044Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.044Z\"\r\n    },\r\n    {\r\n      \"_id\": \"41966bff-d377-40af-b353-fff0bc0a95f7\",\r\n      \"title\": \"Mitgliedschaften und Abos kündigen, bzw. über Umzug informieren (z.b. Vereine, Zeitschriften, Kundenkarten)\",\r\n      \"days\": 90,\r\n      \"days_after_move\": 0,\r\n      \"_owner\": \"3d46bfaa-05c7-4ef9-bf5f-4ad37fb493d2\",\r\n      \"_updatedDate\": \"2018-11-30T12:45:22.043Z\",\r\n      \"_createdDate\": \"2018-11-30T12:45:22.043Z\"\r\n    }\r\n  ];","\"use strict\";\r\n\r\n/*\r\n  App\r\n*/\r\nconst modules = [];\r\nlet currView, currModel;\r\n\r\nexport function add(moduleName, M, V, C) {\r\n    const view = currView = new V();\r\n    const model = currModel = new M();\r\n    const controller = new C();\r\n    model.init();\r\n\r\n    return (modules[moduleName] = {\r\n        model: model,\r\n        view: view,\r\n        controller: controller\r\n    });\r\n}\r\n\r\nexport function get(moduleName) {\r\n    return modules[moduleName];\r\n}\r\n\r\n/*\r\n  Model\r\n*/\r\nexport class Model {\r\n\r\n    constructor() {\r\n        this.tree = {};\r\n        this.callbacks = {\r\n            setPre: [],\r\n            setPost: [],\r\n            change: []\r\n        };\r\n    }\r\n\r\n    init() {\r\n        // Run any callbacks registered during instantiation\r\n        for (var p in this.callbacks) {\r\n            if (this.callbacks.hasOwnProperty(p)) {\r\n                this.runCallbacks(p);\r\n            }\r\n        }\r\n    }\r\n\r\n    setPre(props) {\r\n        // Allows validation etc. before setting props\r\n        // `props` is a copy that can be safely mutated\r\n        const callbacks = this.callbacks[\"setPre\"];\r\n        let i = callbacks.length;\r\n        while (i--) {\r\n            props = callbacks[i].call(this, props);\r\n        }\r\n        return props;\r\n    }\r\n\r\n    setPost(props) {\r\n        // Runs callbacks after `set()` whether model changed or not\r\n        this.runCallbacks(\"setPost\");\r\n    }\r\n\r\n    change() {\r\n        // Runs callbacks after `set()` if model changed\r\n        this.runCallbacks(\"change\");\r\n    }\r\n\r\n    set(propsOrPath, value) {\r\n        // Accepts props object `{...}` OR 'path', 'value'\r\n        let changeEvent;\r\n\r\n        if (isObject(propsOrPath)) {\r\n            // Run any \"setPre\" callbacks on a copy of `props`\r\n            const props = this.setPre(merge({}, propsOrPath));\r\n            merge(this.tree, props, isChanged => changeEvent = isChanged);\r\n        }\r\n        else {\r\n            const path = propsOrPath;\r\n            // Run any \"setPre\" callbacks\r\n            value = this.setPre({ [path]: value })[path];\r\n            changeEvent = setNode(this.tree, path, value);\r\n        }\r\n        if (changeEvent) {\r\n            this.change();\r\n        }\r\n        this.setPost();\r\n        return this; // For chaining\r\n    }\r\n\r\n    get(path) {\r\n        return getNode(this.tree, path);\r\n    }\r\n\r\n    on(label, callback) {\r\n        const callbacks = this.callbacks[label];\r\n        if (callbacks) {\r\n            callbacks.unshift(callback);\r\n        }\r\n        return this; // For chaining\r\n    }\r\n\r\n    runCallbacks(label) {\r\n        const callbacks = this.callbacks[label];\r\n        let i = callbacks.length;\r\n        while (i--) {\r\n            callbacks[i].call(this, this.tree);\r\n        }\r\n    }\r\n\r\n    toJSON() {\r\n        // Return tree for JSON.stringify()\r\n        return this.tree;\r\n    }\r\n}\r\n\r\n/*\r\n  View\r\n*/\r\nexport class View {\r\n\r\n    constructor() {\r\n        // Derived class must assign `el` property\r\n    }\r\n\r\n    get(selector) {\r\n        return this.el.querySelector(selector);\r\n    }\r\n\r\n    getAll(selector) {\r\n        return this.el.querySelectorAll(selector);\r\n    }\r\n}\r\n\r\n/*\r\n  Controller\r\n*/\r\nexport class Controller {\r\n\r\n    constructor() {\r\n        this.model = currModel;\r\n        if (currView.el) {\r\n            this.view = currView;\r\n        }\r\n        else {\r\n            throw (new Error('View.el required!'));\r\n        }\r\n        currModel = null;\r\n        currView = null;\r\n    }\r\n\r\n    bind(bindings) {\r\n        // Run binding functions for selectors (within view.el)\r\n        for (const selector in bindings) {\r\n            if (bindings.hasOwnProperty(selector)) {\r\n                const domEls = this.view.el.querySelectorAll(selector);\r\n                let i = domEls.length;\r\n                while (i--) {\r\n                    bindings[selector].call(this, domEls[i], this.model, this.view, this);\r\n                }\r\n            }\r\n        }\r\n        return this; // For chaining\r\n    }\r\n}\r\n\r\n/*\r\n  Utils\r\n*/\r\nfunction isObject(o) {\r\n    return o === Object(o) &&\r\n        !o.nodeType &&\r\n        !Array.isArray(o) &&\r\n        !(typeof o === 'function') &&\r\n        !(o instanceof RegExp);\r\n}\r\n\r\nfunction isNumeric(val) {\r\n    return Number(parseFloat(val)) == val;\r\n}\r\n\r\nexport function setNode(tree, pathStr, value) {\r\n    // Set node at path string to value\r\n    // Any missing nodes are created\r\n    // NOTE: all numeric nodes below root are assumed to be array indexes\r\n    // Returns boolean `true` if value was changed\r\n    let isChanged = false;\r\n\r\n    getNode(tree, pathStr, (currNode, prop, nextProp) => {\r\n        // Last segment of path string, set value if different\r\n        if (nextProp === undefined) {\r\n            const currVal = currNode[prop];\r\n            if (value !== currVal) {\r\n                currNode[prop] = value;\r\n                isChanged = true;\r\n            }\r\n        }\r\n        // Else create any missing nodes in path\r\n        else if (currNode[prop] === undefined) {\r\n            // Create an array if nextProp is numeric, otherwise an object\r\n            currNode[prop] = isNumeric(nextProp) ? [] : {};\r\n        }\r\n    });\r\n    return isChanged;\r\n}\r\n\r\nexport function getNode(tree, pathStr, eachCallback) {\r\n    // Get node from path string\r\n    // Optional `eachCallback` is passed (currNode, prop, nextProp)\r\n    // This allows the next node to be created or changed before each traversal\r\n    const pathArr = pathStr.split(\".\");\r\n    let currNode = tree;\r\n\r\n    for (let i = 0, len = pathArr.length; i < len; i++) {\r\n        const prop = pathArr[i];\r\n        if (eachCallback) {\r\n            eachCallback(currNode, prop, pathArr[i + 1]);\r\n        }\r\n        if (currNode === undefined) break;\r\n        else currNode = currNode[prop];\r\n    }\r\n    return currNode;\r\n}\r\n\r\nexport function merge( /* [mergeChildObs,] {}, {} [, ...] [, callback] */) {\r\n    // Add or overwrite all properties right to left\r\n    // By default child objects are merged recursively (but not arrays)\r\n    // If a boolean is supplied, it becomes `mergeChildObs` value until another boolean is found\r\n    // If a callback is supplied, it will receive a boolean argument `isChanged`\r\n    let level = 0,\r\n        changeCount = 0,\r\n        mergeChildObs = true,\r\n        callback,\r\n        result = run.apply(this, [0, arguments]);\r\n\r\n    if (callback) callback(!!changeCount);\r\n    return result;\r\n\r\n    function run(level, params) {\r\n        let param,\r\n            retOb,\r\n            paramsCount = params.length;\r\n\r\n        // Child objects\r\n        // Merge into leftmost param if an object, or create object to merge into\r\n        if (level) {\r\n            retOb = isObject(params[0]) ? params[0] : {}\r\n        }\r\n\r\n        for (let i = 0; i < paramsCount; i++) {\r\n            param = params[i];\r\n\r\n            // Top level params may contain other arguments\r\n            if (!level && param != null) { // `undefined` or `null`\r\n                // First object becomes returned object\r\n                // Also allow a DOM node for merging into\r\n                if (!retOb && isObject(param) || param.nodeName) {\r\n                    retOb = param;\r\n                    continue;\r\n                }\r\n                // `mergeChildObs` boolean arguments\r\n                if (typeof param === \"boolean\") {\r\n                    mergeChildObs = param;\r\n                    continue;\r\n                }\r\n                // Last passed in function becomes callback\r\n                if (typeof param === \"function\") {\r\n                    callback = param;\r\n                    continue;\r\n                }\r\n                if (!retOb) continue;\r\n            }\r\n            for (const p in param) {\r\n                if (param.hasOwnProperty(p)) {\r\n                    const val = param[p];\r\n\r\n                    // Merge child objects (recursive)\r\n                    if (mergeChildObs && isObject(val)) {\r\n                        retOb[p] = run(level + 1, [retOb[p], val]);\r\n                    }\r\n                    else if (val !== retOb[p]) {\r\n                        changeCount++;\r\n                        retOb[p] = val;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return retOb || {};\r\n    }\r\n}\r\n","import Boot from \"./modules/boot/boot\";\r\nimport ToDoItems from \"./modules/todoitems/todoitems\";\r\n\r\nnew Boot()\r\n    .then(() => {\r\n        new ToDoItems();\r\n    });\r\n","/*\r\n  Boot operations\r\n*/\r\nexport default class {\r\n\r\n    constructor() {\r\n        return this.ready();\r\n    }\r\n\r\n    ready() {\r\n        return new Promise((resolve, reject) => {\r\n            document.addEventListener(\"DOMContentLoaded\", () => {\r\n                // let initData = {\r\n                //     get: \"Y\"\r\n                // };\r\n               // console.log('APP_ENV: sending to wix:', initData)\r\n               // window.parent.postMessage(initData, \"*\");\r\n                // Just a dummy condition\r\n                if (/\\w/.test(location.href)) {\r\n                    resolve();\r\n                }\r\n                else reject('Error');\r\n            });\r\n        });\r\n    }\r\n    \r\n\r\n};\r\n","import * as app from \"../../lib/app\";\r\nimport * as ToDoViewModel from \"../todoitems/todoviewmodel\";\r\nimport * as data from \"../../json/data\";\r\n\r\n\"use strict\"\r\n\r\n/*\r\n  Extends `app.Controller`\r\n      Properties: `model`, `view`\r\n      Methods: `bind()` for DOM selectors\r\n*/\r\nexport default class extends app.Controller {\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        window.onmessage = event => { this.registerOnMessageReceivedHandler(event) };\r\n\r\n        this.model.on('change', (e) => {\r\n            console.log(`model changed`);\r\n            this.view.setTitle(this.model.get('days'));\r\n            this.view.renderToDoItems(this.model.get('tasks'));\r\n            this.bindEventListeners();\r\n        });\r\n        setTimeout(() => { this.model.set({ 'tasks': data.tasks, 'days': { days: 90, days_after_move: 0 } }) }, 1000);\r\n    }\r\n\r\n    bindEventListeners() {\r\n        this.bind({\r\n            'span.close': (el, model, view, controller) => {\r\n                el.onclick = (e) => this.removeToDoItem(e, el);\r\n            }\r\n        })\r\n        this.bind({\r\n            'li': (el, model, view, controller) => {\r\n                el.onclick = (e) => this.changeToDoItemStatus(e, el);\r\n            }\r\n        })\r\n        this.bind({\r\n            '#addBtn': (el, model, view, controller) => {\r\n                el.onclick = (e) => this.addToDoItem(e);\r\n            }\r\n        });\r\n        this.bind({\r\n            '#todo': (el, model, view, controller) => {\r\n                el.onkeypress = (e) => {\r\n                    let code = (e.keyCode ? e.keyCode : e.which);\r\n                    if (code == 13) { //Enter keycode\r\n                        this.addToDoItem(e);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.bind({\r\n            '#debug': (el, model, view, controller) => {\r\n                el.onclick = (e) => {\r\n                    this.view.get('.debugArea').innerHTML = JSON.stringify(this.model.get('tasks'));\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    changeToDoItemStatus(e, el) {\r\n        e.preventDefault();\r\n        let li = $(el);\r\n        let i = $(el).find('input');\r\n        let l = $(el).find('label');\r\n        let s = $(el).find('label');\r\n        let a = $(el).find('a');\r\n        // console.log(e.target);\r\n        if (a.length > 0 && e.target.nodeName === \"A\") {\r\n            let href = $(a).attr('href');\r\n            window.open(href, '_blank');\r\n            return;\r\n        }\r\n        if (li.attr(`data-state`) !== `completed`) {\r\n            l.addClass('checked');\r\n            li.addClass('checked');\r\n            i.attr(\"checked\", true);\r\n            li.attr(`data-state`, `completed`);\r\n        } else {\r\n            l.removeClass('checked');\r\n            li.removeClass('checked');\r\n            i.attr(\"checked\", false);\r\n            li.attr(`data-state`, `default`);\r\n        }\r\n\r\n        let data = this.getModelState(e, li);\r\n        this.model.set({ 'tasks': data.tasks });\r\n        this.view.setCounter(data.tasks);\r\n\r\n    }\r\n\r\n    getModelState(el, li) {\r\n        let res = { state: li.attr('data-state'), id: li.attr('data-id') };\r\n        let data = { tasks: this.model.get('tasks') } || { tasks: {} };\r\n        if (data.tasks) {\r\n            data.tasks.map(function (value, index, arr) {\r\n                if (value._id === res.id) {\r\n                    value.state = res.state;\r\n                }\r\n                return value;\r\n            });\r\n        }\r\n        return data;\r\n    }\r\n\r\n    removeToDoItem(event, el) {\r\n        event.stopPropagation();\r\n\r\n        this.view.confirm(``, \"Möchten Sie diese Aufgabe wirklich von Ihrer Checkliste entfernen?\", (res) => {\r\n            let tasks = this.model.get('tasks');\r\n            this.model.set({\r\n                'tasks': tasks.map(function (value, index, arr) {\r\n                    if (value._id === res.id) {\r\n                        value.state = res.state;\r\n                    }\r\n                    return value;\r\n                })\r\n            });\r\n            this.view.setCounter(this.model.get('tasks'));\r\n            $(el).parent('li').hide();\r\n        }, () => { }, el);\r\n    }\r\n\r\n    addToDoItem(e) {\r\n        let title = this.view.get(\"#todo\").value;\r\n        if (!title) return;\r\n        let todo = new ToDoViewModel.default(this.model.get('days'), title, \"custom\");\r\n        let data = { tasks: this.model.get('tasks') };\r\n        if (data.tasks.length > 0) {\r\n            data.tasks.unshift(todo);\r\n        } else {\r\n            data.tasks = [todo];\r\n        }\r\n        this.view.addItem(todo);\r\n        console.log('item added, model state:', this.model.get('tasks'));\r\n        this.view.get(\"#todo\").value = '';\r\n        this.model.set({ 'tasks': data.tasks });\r\n        this.view.setCounter(this.model.get('tasks'));\r\n        this.bindEventListeners();\r\n    }\r\n\r\n    sendMessageToWix(jsObj) {\r\n        console.log('APP_ENV: sending to wix:', jsObj)\r\n        window.parent.postMessage(jsObj, \"*\");\r\n    }\r\n\r\n    prepareGetDataFromWix() {\r\n        let data = {\r\n            GET: \"GET\"\r\n        }\r\n        return data;\r\n    }\r\n\r\n\r\n    fromSyncCalendar(data) { //data is event.data\r\n        let { syncCalendar } = data;\r\n        return syncCalendar;\r\n    }\r\n\r\n    registerOnMessageReceivedHandler(event) {\r\n        console.log(\"APP_ENV: data received from wix in registerOnMessageReceivedHandler: \", event);\r\n\r\n        if (event.data) {\r\n\r\n            let { tasks, days, ready, saveAll, beforeRegister, syncCalendar, error, blob } = event.data;\r\n\r\n            if (blob) {\r\n                console.log(`in blob`);\r\n                let file = new Blob([blob], { type: 'application/pdf' });\r\n                console.log(file);\r\n                var fileURL = URL.createObjectURL(file);\r\n                console.log(`file url reached`, fileURL);\r\n                window.open(fileURL, '_blank');\r\n                console.log(`window open reached`, fileURL);\r\n                return;\r\n            }\r\n            if (error) {\r\n                this.view.info(`Error`, `${JSON.stringify(error)}`);\r\n                return;\r\n            }\r\n\r\n            if (tasks) {\r\n                this.model.set({ 'tasks': tasks, 'days': days });\r\n            }\r\n            if (syncCalendar) {\r\n                this.view.info(``, `Wir arbeiten daran, Ihnen dieses Feature zur Verfügung zu stellen`);\r\n                return;\r\n            }\r\n            if (saveAll) {\r\n\r\n                if (!beforeRegister) {\r\n                    this.view.info(``, `Ihre Daten wurden erfolgreich gespeichert.`);\r\n                }\r\n                this.sendMessageToWix({\r\n                    tasks: this.model.get('tasks'),\r\n                    POST: \"POST\"\r\n                });\r\n            }\r\n\r\n            if (ready) {\r\n                this.sendMessageToWix(this.prepareGetDataFromWix());\r\n            }\r\n        }\r\n    }\r\n\r\n};","import * as app from \"../../lib/app\";\r\nimport * as tasks   from \"../../json/data\"\r\n\"use strict\"\r\n\r\n/*\r\n  Extends app.Model\r\n      Methods: `set()`, `get()`, `on('setPre'|'setPost'|'change')`\r\n*/\r\nexport default class extends app.Model {\r\n\r\n    constructor() {\r\n        super();\r\n       \r\n        this.on('change', (e) => {\r\n            //console.log('model changed from base model: ', e);\r\n        });\r\n        this.sanitize = props => {\r\n            for (const p in props) {\r\n                if (props.hasOwnProperty(p) && typeof props[p] === \"string\") {\r\n                    props[p] = props[p].replace(/[^\\w\\s'!.,;]/g, '');\r\n                }\r\n            }\r\n            return props;\r\n        }\r\n\r\n        this.on('setPre', props => this.sanitize(props));\r\n       \r\n        //this.set({'tasks': {}});\r\n        //this.set({'days' : {days:90, days_after_move:0}});\r\n    }\r\n\r\n};\r\n","import * as app from \"../../lib/app\";\r\nimport Model from \"./model\"\r\nimport View from \"./view\"\r\nimport Controller from \"./controller\"\r\n\r\n\"use strict\"\r\n\r\nexport default class {\r\n\r\n    constructor() {\r\n        return app.add(\"ToDoItems\", Model, View, Controller);\r\n    }\r\n\r\n};\r\n","export default class ToDoViewModel  {\r\n\r\n    constructor(days, title, state) {\r\n        this._id = this.createGuid();\r\n        this.days = days.days;\r\n        this.days_after_move = days.days_after_move;\r\n        this.title = title;\r\n        this.state = state;\r\n        this.order = 0;\r\n    }\r\n    createGuid() {\r\n        return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\r\n            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\r\n        )\r\n    }\r\n\r\n\r\n}","import * as app from \"../../lib/app\";\r\n\r\n\"use strict\"\r\n\r\n/*\r\n  Extends app.View\r\n      Properties: `el`\r\n      Methods: `get()`, `getAll()` for DOM selectors\r\n*/\r\nexport default class extends app.View {\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        // Set DOM ref\r\n        this.el = document.getElementById(\"todosection\");\r\n        this.title = document.querySelector(\".h2-title\");\r\n        this.setModal();\r\n        this.showLoader();\r\n    }\r\n    setModal() {\r\n        this.modal = $('#todoModal');\r\n        this.modal.modal('hide');\r\n\r\n    }\r\n    showLoader() {\r\n        $(function () {\r\n            var $loader = $('#loader'),\r\n                max = 75, speed = 500,\r\n                char = '<i>.</i>', count = 0,\r\n                dots = function () {\r\n                    if (count <= max) {\r\n                        count++;\r\n                        for (var i = 0; i < 1; i++) {\r\n                            $loader.append(char);\r\n                            $loader.find('i').fadeIn(speed);\r\n                        }\r\n                    }\r\n                };\r\n\r\n            setInterval(dots, speed / 2);\r\n        });\r\n    }\r\n    removeItem(  el) {\r\n        let li = $(el).closest('li');\r\n        return {state: 'deleted', id: li.data('id')}\r\n    }\r\n\r\n    addItem(item) {\r\n        this.list = document.querySelector(\"#todolist\");\r\n        var wrapper = document.createElement('div');\r\n        wrapper.innerHTML = this.renderToDoItem(item);\r\n        var li = wrapper.firstChild;\r\n\r\n        if (this.list.childNodes[0]) {\r\n            this.list.insertBefore(li, this.list.childNodes[0]);\r\n        } else {\r\n            this.list.appendChild(li);\r\n        }\r\n    }\r\n\r\n    info(title, message) {\r\n\r\n        this.modal.find('#todoModalCenterTitle').html(title);\r\n        this.modal.find('#message').html(message);\r\n        this.modal.find('.modal-footer').hide();\r\n        setTimeout(() => {\r\n            this.modal.modal(\"hide\");\r\n        }, 3000);\r\n        this.modal.modal('show');\r\n    }\r\n    confirm(title, message, yescallBack, nocallBack,  elem) {\r\n\r\n        this.modal.find('#todoModalCenterTitle').html(title);\r\n        this.modal.find('#message').html(message);\r\n        this.modal.find('.modal-footer').show();\r\n        this.modal.on('click', '#confirm', (e) => {\r\n            this.modal.modal(\"hide\");\r\n            this.modal.on(\"hidden.bs.modal\", yescallBack(this.removeItem( elem)));\r\n        });\r\n        this.modal.modal('show');\r\n    }\r\n\r\n    setCounter (todos){\r\n        let count, total;\r\n        if(!todos) return;\r\n        try {\r\n\t\t\tif (todos) {\r\n\t\t\t\ttotal = todos.filter(item => item.state !== 'deleted').length;\r\n\t\t\t\tcount = todos.filter((item) => item.state === 'completed').length;\r\n\t\t\t\t\r\n            }\r\n           \r\n            this.get(\".checklist-counter\").innerHTML =  `${count}/${total}`;\r\n            \r\n\t\t} catch (err) {\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n      \r\n    }\r\n    setTitle(days) {\r\n        if (!days) return;\r\n        //console.log(`days ${JSON.stringify(days)}`);\r\n        let title = `3 Monate vor dem Umzug`;\r\n        if (days.days === 90 && days.days_after_move === 0) {\r\n            title = `3 Monate vor dem Umzug`;\r\n        }\r\n        if (days.days === 30 && days.days_after_move === 0) {\r\n            title = `1 Monat vor dem Umzug`;\r\n        }\r\n        if (days.days === 14 && days.days_after_move === 0) {\r\n            title = `2 Wochen vor dem Umzug`;\r\n        }\r\n        if (days.days === 1 && days.days_after_move === 0) {\r\n            title = `1 Tag vor dem Umzug`;\r\n        }\r\n        if (days.days === 0 && days.days_after_move === 0) {\r\n            title = `Am Umzugstag`;\r\n        }\r\n        if (days.days === 0 && days.days_after_move === 14) {\r\n            title = `Bis 14 Tage nach dem Umzug`;\r\n        }\r\n        if (days.days === 0 && days.days_after_move === 90) {\r\n            title = `Bis 3 Monate nach dem Umzug`;\r\n        }\r\n        if (days.days === 0 && days.days_after_move == 300) {\r\n            title = `Bis 12 Monate nach dem Umzug`;\r\n        }\r\n\r\n        this.get(\".checklist-title\").innerHTML = title;\r\n    }\r\n\r\n    renderToDoItems(todos) {\r\n       \r\n        if (!todos) { return; }\r\n        if (todos.days) {\r\n            this.get('.checklist-title').innerHTML = `${todos.days} days before move`;\r\n        }\r\n        if (todos) {\r\n             this.setCounter(todos);\r\n        }\r\n        let list = Array.prototype.map.call(todos, (item) => {\r\n            if (item.state !== \"deleted\") {\r\n                return this.renderToDoItem(item)\r\n            }\r\n        });\r\n\r\n        this.get(\"#todolist\").innerHTML = list.join(\"\");\r\n    }\r\n\r\n\r\n    renderToDoItem(item) {\r\n        let checked = item.state === \"completed\" ? \"checked\" : \"\";\r\n        return `<li data-state=\"${!item.state ? \"default\" : item.state}\" data-id=\"${item._id}\" class=\"${checked}\">\r\n                    <label class=\"checkbox-container ${checked}\"> \r\n                        <input type=\"checkbox\" ${checked} class=\"${checked}\">\r\n                        <span class=\"todo-item-title\">${item.title}</span><span class=\"checkmark\"></span> \r\n                    </label>\r\n                    <span class=\"close\">×</span>\r\n                </li>`;\r\n    }\r\n\r\n}"]}