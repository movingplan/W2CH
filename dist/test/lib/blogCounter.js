(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

describe("Counter component", function () {
  it("can write slug in local storage when user visits article if it's not been visited", function () {
    var local = {
      items: {
        visited_articles: "[\"a\", \"b\" ]"
      },
      getItem: function getItem(name) {
        return this.items[name];
      },
      setItem: function setItem(name, value) {
        this.items[name] = value;
      }
    };
    var component = new CounterComponent(local);
    component.visit(["tipps-zum-umzug-schweiz", "test"]);
    expect(component.countOfReadArticles()).toBe(3);
  });
  it("can not write same slug in local if article was already visited", function () {
    var local = {
      items: {
        visited_articles: "[\"tipps-zum-umzug-schweiz\", \"b\" ]"
      },
      getItem: function getItem(name) {
        return this.items[name];
      },
      setItem: function setItem(name, value) {
        this.items[name] = value;
      }
    };
    var component = new CounterComponent(local);
    component.visit(["tipps-zum-umzug-schweiz"]);
    component.visit(["tipps-zum-umzug-schweiz"]);
    expect(component.countOfReadArticles()).toBe(2);
  });
  it("should raise event after more then 3 different articles attempted to be visited", function () {
    var local = {
      items: {
        visited_articles: "[\"TEST1\", \"TEST2\", \"TEST44\"]"
      },
      getItem: function getItem(name) {
        return this.items[name];
      },
      setItem: function setItem(name, value) {
        this.items[name] = value;
      }
    };
    var component = new CounterComponent(local);
    spyOn(component, "openLightBox");
    component.visit(["tipps-zum-umzug-schweiz", "test"]);
    expect(component.countOfReadArticles()).toBe(3);
    expect(component.openLightBox).toHaveBeenCalled();
  });
  it("should count only urls which contain 'tipps-zum-umzug-schweiz' and do not contain 'categories' as part of path array ", function () {
    var local = {
      items: {
        visited_articles: "[\"TEST1\", \"TEST2\", \"TEST44\"]"
      },
      getItem: function getItem(name) {
        return this.items[name];
      },
      setItem: function setItem(name, value) {
        this.items[name] = value;
      }
    };
    var component = new CounterComponent(local);
    spyOn(component, "openLightBox");
    var path = ["tipps-zum-umzug-schweiz", "test"];
    component.visit(path);
    expect(component.countOfReadArticles()).toBe(3);
    expect(component.openLightBox).toHaveBeenCalled();
  });
  it("should ignore URL slugs which contains tipps-zum-umzug-schweiz along with categories", function () {
    var local = {
      items: {
        visited_articles: "[\"TEST1\", \"TEST2\", \"TEST44\"]"
      },
      getItem: function getItem(name) {
        return this.items[name];
      },
      setItem: function setItem(name, value) {
        this.items[name] = value;
      }
    };
    var component = new CounterComponent(local);
    var path = ["tipps-zum-umzug-schweiz", "categories"];
    expect(function () {
      return component.ignoreUrlIfNeeded(path);
    }).toThrow();
  });
  it("should ignore any path that does not contain 'tipps-zum-umzug-schweiz' as part of URL", function () {
    var local = {
      items: {
        visited_articles: "[\"TEST1\", \"TEST2\", \"TEST44\"]"
      },
      getItem: function getItem(name) {
        return this.items[name];
      },
      setItem: function setItem(name, value) {
        this.items[name] = value;
      }
    };
    var component = new CounterComponent(local);
    var path = ["anything"];
    expect(function () {
      return component.ignoreUrlIfNeeded(path);
    }).not.toThrow();
  });
  it("should ignore root url '/tipps-zum-umzug-schweiz' ", function () {
    var local = {
      items: {
        visited_articles: null
      },
      getItem: function getItem(name) {
        return this.items[name];
      },
      setItem: function setItem(name, value) {
        this.items[name] = value;
      }
    };
    var component = new CounterComponent(local);
    var path = ["tipps-zum-umzug-schweiz"];
    component.visit(path);
    expect(component.countOfReadArticles()).toBe(0);
  });
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdGVzdC9saWIvYmxvZ0NvdW50ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLFFBQVEsQ0FBQyxtQkFBRCxFQUFzQixZQUFZO0FBQ3RDLEVBQUEsRUFBRSxDQUFDLG1GQUFELEVBQXNGLFlBQVk7QUFDaEcsUUFBSSxLQUFLLEdBQUc7QUFDUixNQUFBLEtBQUssRUFBRTtBQUFFLFFBQUEsZ0JBQWdCO0FBQWxCLE9BREM7QUFFUixNQUFBLE9BQU8sRUFBRSxpQkFBVSxJQUFWLEVBQWdCO0FBQ3JCLGVBQU8sS0FBSyxLQUFMLENBQVcsSUFBWCxDQUFQO0FBQ0gsT0FKTztBQUtSLE1BQUEsT0FBTyxFQUFFLGlCQUFVLElBQVYsRUFBZ0IsS0FBaEIsRUFBdUI7QUFDNUIsYUFBSyxLQUFMLENBQVcsSUFBWCxJQUFtQixLQUFuQjtBQUNIO0FBUE8sS0FBWjtBQVNBLFFBQUksU0FBUyxHQUFHLElBQUksZ0JBQUosQ0FBcUIsS0FBckIsQ0FBaEI7QUFFQSxJQUFBLFNBQVMsQ0FBQyxLQUFWLENBQWdCLENBQUMseUJBQUQsRUFBNEIsTUFBNUIsQ0FBaEI7QUFDQSxJQUFBLE1BQU0sQ0FBQyxTQUFTLENBQUMsbUJBQVYsRUFBRCxDQUFOLENBQXdDLElBQXhDLENBQTZDLENBQTdDO0FBQ0gsR0FkQyxDQUFGO0FBZ0JBLEVBQUEsRUFBRSxDQUFDLGlFQUFELEVBQW9FLFlBQVk7QUFDOUUsUUFBSSxLQUFLLEdBQUc7QUFDUixNQUFBLEtBQUssRUFBRTtBQUFFLFFBQUEsZ0JBQWdCO0FBQWxCLE9BREM7QUFFUixNQUFBLE9BQU8sRUFBRSxpQkFBVSxJQUFWLEVBQWdCO0FBQ3JCLGVBQU8sS0FBSyxLQUFMLENBQVcsSUFBWCxDQUFQO0FBQ0gsT0FKTztBQUtSLE1BQUEsT0FBTyxFQUFFLGlCQUFVLElBQVYsRUFBZ0IsS0FBaEIsRUFBdUI7QUFDNUIsYUFBSyxLQUFMLENB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SUFBWCxJQUFtQixLQUFuQjtBQUNIO0FBUE8sS0FBWjtBQVNBLFFBQUksU0FBUyxHQUFHLElBQUksZ0JBQUosQ0FBcUIsS0FBckIsQ0FBaEI7QUFDQSxRQUFJLElBQUksR0FBRyxDQUFDLHlCQUFELENBQVg7QUFDQSxJQUFBLFNBQVMsQ0FBQyxLQUFWLENBQWdCLElBQWhCO0FBQ0EsSUFBQSxNQUFNLENBQUMsU0FBUyxDQUFDLG1CQUFWLEVBQUQsQ0FBTixDQUF3QyxJQUF4QyxDQUE2QyxDQUE3QztBQUNILEdBZEMsQ0FBRjtBQWVILENBbkhPLENBQVIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJkZXNjcmliZShcIkNvdW50ZXIgY29tcG9uZW50XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgIGl0KFwiY2FuIHdyaXRlIHNsdWcgaW4gbG9jYWwgc3RvcmFnZSB3aGVuIHVzZXIgdmlzaXRzIGFydGljbGUgaWYgaXQncyBub3QgYmVlbiB2aXNpdGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgbG9jYWwgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiB7IHZpc2l0ZWRfYXJ0aWNsZXM6IGBbXCJhXCIsIFwiYlwiIF1gIH0sXHJcbiAgICAgICAgICAgIGdldEl0ZW06IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtc1tuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0SXRlbTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zW25hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBjb21wb25lbnQgPSBuZXcgQ291bnRlckNvbXBvbmVudChsb2NhbCk7XHJcblxyXG4gICAgICAgIGNvbXBvbmVudC52aXNpdChbXCJ0aXBwcy16dW0tdW16dWctc2Nod2VpelwiLCBcInRlc3RcIl0pO1xyXG4gICAgICAgIGV4cGVjdChjb21wb25lbnQuY291bnRPZlJlYWRBcnRpY2xlcygpKS50b0JlKDMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJjYW4gbm90IHdyaXRlIHNhbWUgc2x1ZyBpbiBsb2NhbCBpZiBhcnRpY2xlIHdhcyBhbHJlYWR5IHZpc2l0ZWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCBsb2NhbCA9IHtcclxuICAgICAgICAgICAgaXRlbXM6IHsgdmlzaXRlZF9hcnRpY2xlczogYFtcInRpcHBzLXp1bS11bXp1Zy1zY2h3ZWl6XCIsIFwiYlwiIF1gIH0sXHJcbiAgICAgICAgICAgIGdldEl0ZW06IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtc1tuYW1lXTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0SXRlbTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zW25hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBjb21wb25lbnQgPSBuZXcgQ291bnRlckNvbXBvbmVudChsb2NhbCk7XHJcbiAgICAgICAgY29tcG9uZW50LnZpc2l0KFtcInRpcHBzLXp1bS11bXp1Zy1zY2h3ZWl6XCJdKTtcclxuICAgICAgICBjb21wb25lbnQudmlzaXQoW1widGlwcHMtenVtLXVtenVnLXNjaHdlaXpcIl0pO1xyXG4gICAgICAgIGV4cGVjdChjb21wb25lbnQuY291bnRPZlJlYWRBcnRpY2xlcygpKS50b0JlKDIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoXCJzaG91bGQgcmFpc2UgZXZlbnQgYWZ0ZXIgbW9yZSB0aGVuIDMgZGlmZmVyZW50IGFydGljbGVzIGF0dGVtcHRlZCB0byBiZSB2aXNpdGVkXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgbG9jYWwgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiB7IHZpc2l0ZWRfYXJ0aWNsZXM6IGBbXCJURVNUMVwiLCBcIlRFU1QyXCIsIFwiVEVTVDQ0XCJdYCB9LFxyXG4gICAgICAgICAgICBnZXRJdGVtOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldEl0ZW06IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtc1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgY29tcG9uZW50ID0gbmV3IENvdW50ZXJDb21wb25lbnQobG9jYWwpO1xyXG4gICAgICAgIHNweU9uKGNvbXBvbmVudCwgXCJvcGVuTGlnaHRCb3hcIik7XHJcbiAgICAgICAgY29tcG9uZW50LnZpc2l0KFtcInRpcHBzLXp1bS11bXp1Zy1zY2h3ZWl6XCIsIFwidGVzdFwiXSk7XHJcblxyXG4gICAgICAgIGV4cGVjdChjb21wb25lbnQuY291bnRPZlJlYWRBcnRpY2xlcygpKS50b0JlKDMpO1xyXG4gICAgICAgIGV4cGVjdChjb21wb25lbnQub3BlbkxpZ2h0Qm94KS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcInNob3VsZCBjb3VudCBvbmx5IHVybHMgd2hpY2ggY29udGFpbiAndGlwcHMtenVtLXVtenVnLXNjaHdlaXonIGFuZCBkbyBub3QgY29udGFpbiAnY2F0ZWdvcmllcycgYXMgcGFydCBvZiBwYXRoIGFycmF5IFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGxvY2FsID0ge1xyXG4gICAgICAgICAgICBpdGVtczogeyB2aXNpdGVkX2FydGljbGVzOiBgW1wiVEVTVDFcIiwgXCJURVNUMlwiLCBcIlRFU1Q0NFwiXWAgfSxcclxuICAgICAgICAgICAgZ2V0SXRlbTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRJdGVtOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IG5ldyBDb3VudGVyQ29tcG9uZW50KGxvY2FsKTtcclxuICAgICAgICBzcHlPbihjb21wb25lbnQsIFwib3BlbkxpZ2h0Qm94XCIpO1xyXG4gICAgICAgIGxldCBwYXRoID0gW1widGlwcHMtenVtLXVtenVnLXNjaHdlaXpcIiwgXCJ0ZXN0XCJdO1xyXG4gICAgICAgIGNvbXBvbmVudC52aXNpdChwYXRoKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudC5jb3VudE9mUmVhZEFydGljbGVzKCkpLnRvQmUoMyk7XHJcbiAgICAgICAgZXhwZWN0KGNvbXBvbmVudC5vcGVuTGlnaHRCb3gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwic2hvdWxkIGlnbm9yZSBVUkwgc2x1Z3Mgd2hpY2ggY29udGFpbnMgdGlwcHMtenVtLXVtenVnLXNjaHdlaXogYWxvbmcgd2l0aCBjYXRlZ29yaWVzXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgbG9jYWwgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiB7IHZpc2l0ZWRfYXJ0aWNsZXM6IGBbXCJURVNUMVwiLCBcIlRFU1QyXCIsIFwiVEVTVDQ0XCJdYCB9LFxyXG4gICAgICAgICAgICBnZXRJdGVtOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNbbmFtZV07XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldEl0ZW06IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtc1tuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBsZXQgY29tcG9uZW50ID0gbmV3IENvdW50ZXJDb21wb25lbnQobG9jYWwpO1xyXG4gICAgICAgIGxldCBwYXRoID0gW1widGlwcHMtenVtLXVtenVnLXNjaHdlaXpcIiwgXCJjYXRlZ29yaWVzXCJdO1xyXG4gICAgICAgIGV4cGVjdCgoKSA9PiBjb21wb25lbnQuaWdub3JlVXJsSWZOZWVkZWQocGF0aCkpLnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KFwic2hvdWxkIGlnbm9yZSBhbnkgcGF0aCB0aGF0IGRvZXMgbm90IGNvbnRhaW4gJ3RpcHBzLXp1bS11bXp1Zy1zY2h3ZWl6JyBhcyBwYXJ0IG9mIFVSTFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGxvY2FsID0ge1xyXG4gICAgICAgICAgICBpdGVtczogeyB2aXNpdGVkX2FydGljbGVzOiBgW1wiVEVTVDFcIiwgXCJURVNUMlwiLCBcIlRFU1Q0NFwiXWAgfSxcclxuICAgICAgICAgICAgZ2V0SXRlbTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRJdGVtOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IG5ldyBDb3VudGVyQ29tcG9uZW50KGxvY2FsKTtcclxuICAgICAgICBsZXQgcGF0aCA9IFtcImFueXRoaW5nXCJdO1xyXG4gICAgICAgIGV4cGVjdCgoKSA9PiBjb21wb25lbnQuaWdub3JlVXJsSWZOZWVkZWQocGF0aCkpLm5vdC50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdChcInNob3VsZCBpZ25vcmUgcm9vdCB1cmwgJy90aXBwcy16dW0tdW16dWctc2Nod2VpeicgXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgbG9jYWwgPSB7XHJcbiAgICAgICAgICAgIGl0ZW1zOiB7IHZpc2l0ZWRfYXJ0aWNsZXM6IG51bGwgfSxcclxuICAgICAgICAgICAgZ2V0SXRlbTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1zW25hbWVdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXRJdGVtOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudCA9IG5ldyBDb3VudGVyQ29tcG9uZW50KGxvY2FsKTtcclxuICAgICAgICBsZXQgcGF0aCA9IFtcInRpcHBzLXp1bS11bXp1Zy1zY2h3ZWl6XCJdO1xyXG4gICAgICAgIGNvbXBvbmVudC52aXNpdChwYXRoKTtcclxuICAgICAgICBleHBlY3QoY29tcG9uZW50LmNvdW50T2ZSZWFkQXJ0aWNsZXMoKSkudG9CZSgwKTtcclxuICAgIH0pO1xyXG59KTsiXX0=
